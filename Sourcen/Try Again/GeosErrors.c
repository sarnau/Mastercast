#include "GeosErrors.h"#include "GlobalLib.h"#include "Utilities.h"#include <Printing.h>#include <UDebugging.h>EDebugAction	gDebugThrow = debugAction_Nothing;EDebugAction	gDebugSignal = debugAction_Nothing;const	short	ALRT_ThrowAt	= 251;const	short	ALRT_SignalAt	= 252;/*** * ***/void	GetErrorString(StringPtr errMsg, OSErr macErr);void	GetErrorString(StringPtr errMsg, OSErr macErr){	Handle		h = GetResource('Errs', 128);	ThrowIfResFail_(h);	short	*p = (short*)*h;	int		tcount = *p++;		// Anzahl der Einträge	// Liste der Fehlerstring-Tabelle durchgehen	for(; tcount-- > 0; p += 3) {		if(p[0] < macErr)		// kleiner als das Minimum?			continue;			// => weiter suchen		if(p[1] > macErr)		// größer als das Maximum?			continue;			// => weiter suchen		GetIndString(errMsg, p[2], ABS(macErr - p[0]) + 1);	// Fehlerstring holen		if(!errMsg[0])			// kein Fehlerstring?			break;				// => Vorgabestring nehmen		return;	}	CopyPString(errMsg, "\pUnknown system error.");}#if 0void		UDebugging::AlertThrowAt(ConstStringPtr inError, ConstStringPtr inFile, long inLine){Str15			lineStr;Str255			errMsg;		// Text of error messagelong			macErr;	::NumToString(inLine, lineStr);	::StringToNum(inError, &macErr);	GetErrorString(errMsg, macErr);			// Fehlermessage holen	::ParamText(inError, inFile, lineStr, errMsg);	pfeil();	::StopAlert(ALRT_ThrowAt, nil);}void		UDebugging::AlertSignalAt(ConstStringPtr inTestStr, ConstStringPtr inFile, long inLine){Str15			lineStr;	::NumToString(inLine, lineStr);	::ParamText(inTestStr, inFile, lineStr, "\p");	pfeil();	::StopAlert(ALRT_SignalAt, nil);}#endif/*** *	CheckOSError *	irgendein Fehler aufgetreten? true, wenn nicht. Sonst wird ein Alert *	dargestellt und false zurückgegeben ***/Boolean	CheckOSError(OSErr macErr){Str255			errMsg;		// Text of error messageStr15			errNum;		// Error number as a string	if(macErr == noErr || macErr == userCanceledErr || macErr == iPrAbort)			return true;					// kein Fehler!	NumToString((long)macErr, errNum);		// Fehlernummer in einen String	GetErrorString(errMsg, macErr);			// Fehlermessage holen	ParamText(errMsg, errNum, "\p", "\p");	pfeil();	StopAlert(10005, nil);	return false;							// Fehler ist aufgetreten}